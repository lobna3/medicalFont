<div class="page-wrapper">
    <div class="content">
        <div class="row">
            <div class="col-sm-12">
                <h4 class="page-title">View Folders</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="card-box">
                    <div class="mailview-content">
                        <div class="mailview-header">
                            <div class="row">
                                <div class="col-sm-9">
                                    <div class="text-ellipsis m-b-10">
                                        <span class="mail-view-title"> Admin </span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="mail-view-action">
                                        <button type="button" class="btn btn-white"><i class="fa fa-upload"></i>  
                                            <input class="hide_file" type="file" (change)="upload($event)"> Upload</button>
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="sender-info">
                                <div class="sender-img">
                                    <img width="40" alt="" [src]="user && user.image ? server+user.image : 'assets/img/user.jpg'" class="avatar">
                                </div>
                                <div class="receiver-details float-left">
                                    <span class="sender-name">{{user?.firstname}} {{user?.lastname}} {{user?.email}} </span>
                                    <span class="receiver-name">
                                      
                                    </span>
                                </div>
                                <div class="mail-sent-time">
                                   
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="mailview-inner">
                            
                        </div>
                    </div>
                    <div class="mail-attachments">
                        <p><i class="fa fa-paperclip"></i> 2 Attachments - <a href="#">View all</a> | <a href="#">Download all</a></p>
                        <ul class="attachments clearfix text-center" >
                            <li *ngFor="let item of documents ">
                                <div class="attach-file">
                                    <span *ngIf="item.type.indexOf('pdf') != -1 ; else picture" class="fa fa-file-pdf-o"></span>
                                    <ng-template #picture>
                                        <span  class="fa fa-file-picture-o"></span>

                                    </ng-template>
                                    <span>{{item.patient?.user?.firstname}}</span>
                                  <!--   <img class="fa fa-file-pdf-o " [src]="item.file ? server+item.file : 'assets/img/user.jpg'">
                                 -->
                                </div>
                                <div class="attach-info">
                                    <a [href]="server+item.file" target="_blank" class="attach-filename">{{item.designation}}</a>
                                    <div class="attach-fileize"> 
                                        <span *ngIf="item.size && item.size > 1024000 ; else show_kb">
                                            {{(item.size / (1024*1024)) | number}} MB
                                        </span>
                                        <ng-template #show_kb>
                                            {{(item.size / 1024) | number}} KB
                                        </ng-template>
                                        <button type="button" class="btn btn-white" (click)="showModal(item)"><i class="fa fa-share"></i> </button>
                                        </div>
                                </div>
                            </li>
                         
                        </ul>
                    </div>
                    <div class="mailview-footer">
                        <div class="row">
                            <div class="col-sm-6 left-action">
                            
                                 <!--<button type="button" class="btn btn-white"><i class="fa fa-upload"></i>  
                                      <input class="hide_file" type="file" (change)="upload($event)"> Upload</button>-->
                            </div>
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>


     
    </div>
  
</div>

<!-- Modal -->
<div *ngIf="show" class="modal fade show" style="display: block;" id="exampleModal" aria-labelledby="exampleModalLabel" >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="btn-close" (click)="hideModal()" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          
          
            {{form.valid}}
            <div class="form-group">
                <label>Patient Name</label>
                <select class="form-control select" [(ngModel)]="selected_file.patient_id" >
                    <option *ngFor="let s of users" [value]="s.id">{{s.firstname}} {{s.lastname}}</option>
                   
                </select>
            </div>
         
      
          <!-- [(ngModel)]="selected_file.patient_id" -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="hideModal()">Close</button>
          <button type="button" class="btn btn-primary" [disabled]="!selected_file.patient_id"  (click)="updateFile()">Save changes</button>
        </div>
    
      </div>
    </div>
  </div>